<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Content Manager | Builder Ballery</title>
  <meta name="robots" content="noindex,nofollow">
  <link rel="stylesheet" href="/admin/styles.css?v=20260224-auth9">
</head>
<body>
  <main class="admin-shell">
    <header class="admin-head panel">
      <h1>Builder Ballery Content Manager</h1>
      <p>Use authenticated access to manage reels and upload document files directly to backend storage.</p>
      <p><a href="/">Back to website</a></p>
    </header>

    <section id="auth-panel" class="panel auth-shell">
      <h2>Admin Sign In</h2>
      <p>Use your authorized email and password to access the content manager.</p>

      <div class="auth-grid">
        <form id="signin-form" class="form-grid" novalidate>
          <h3>Sign In</h3>
          <label>
            Email
            <input name="email" type="email" required autocomplete="email" placeholder="you@example.com">
          </label>
          <label>
            Password
            <input name="password" type="password" required autocomplete="current-password" minlength="6" placeholder="Enter password">
          </label>
          <button class="btn" type="submit">Sign In</button>
        </form>
      </div>

      <p id="auth-status" class="status" aria-live="polite"></p>
    </section>

    <section id="manager-panel" class="panel hidden">
      <div class="manager-head">
        <div>
          <h2>Content Manager</h2>
          <p>Signed in as <strong id="user-email">-</strong></p>
        </div>
        <button id="signout-btn" class="btn btn-danger" type="button">Sign Out</button>
      </div>

      <div class="manager-grid">
        <section class="subpanel">
          <h3>Add Video</h3>
          <form id="video-form" class="form-grid" novalidate>
            <label>
              Title
              <input name="title" type="text" required>
            </label>
            <label>
              Category
              <select name="category" required>
                <option value="">Select</option>
                <option value="Structural">Structural</option>
                <option value="Materials">Materials</option>
                <option value="Buying Mistakes">Buying Mistakes</option>
                <option value="Documentation">Documentation</option>
                <option value="Site Execution">Site Execution</option>
              </select>
            </label>
            <label class="full">
              Instagram Reel URL
              <input name="reelUrl" type="url" required placeholder="https://www.instagram.com/reel/.../">
            </label>
            <label class="full">
              Summary (2-3 lines)
              <textarea name="summary" rows="4" required></textarea>
            </label>
            <label class="full">
              Related Document IDs (comma separated)
              <input name="relatedDocumentIds" type="text" placeholder="doc-001, doc-002">
            </label>
            <button class="btn" type="submit">Save Video</button>
          </form>
        </section>

        <section class="subpanel">
          <h3>Videos</h3>
          <div id="videos-list" class="list"></div>
        </section>

        <section class="subpanel">
          <h3>Add Document</h3>
          <form id="doc-form" class="form-grid" novalidate>
            <label>
              ID
              <input name="id" type="text" placeholder="doc-bbmp-approval-checklist">
            </label>
            <label>
              Date
              <input name="date" type="date" required>
            </label>
            <label class="full">
              Title
              <input name="title" type="text" required>
            </label>
            <label class="full">
              Short Explanation
              <textarea name="description" rows="3" required></textarea>
            </label>
            <label class="full">
              Upload File (PDF or other file)
              <input name="file" type="file" accept=".pdf,.doc,.docx,.xls,.xlsx,.zip,.jpg,.jpeg,.png,.txt">
            </label>
            <label class="full">
              Or Direct Download URL
              <input name="downloadUrl" type="url" placeholder="https://... or /documents/...">
            </label>
            <button class="btn" type="submit">Upload and Save Document</button>
          </form>
        </section>

        <section class="subpanel">
          <h3>Documents</h3>
          <div id="docs-list" class="list"></div>
        </section>
      </div>

      <section class="subpanel subpanel-note">
          <h3>Backend Status</h3>
          <p>This content manager is connected to Supabase. Use the forms above to add, update, and remove reels and documents.</p>
      </section>

      <p id="manager-status" class="status" aria-live="polite"></p>
    </section>
  </main>

  <script src="/assets/env-config.js?v=20260224-env2"></script>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.97.0" integrity="sha384-1+ItoWbWcmVSm+Y+dJaUt4SEWNA21/jxef+Z0TSHHVy/dEUxEUEnZ1bHn6GT5hj+" crossorigin="anonymous"></script>
  <script src="/admin/app.js?v=20260224-auth9" defer></script>
</body>
</html>
